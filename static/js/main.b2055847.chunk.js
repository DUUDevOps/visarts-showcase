(this["webpackJsonpvisarts-showcase"]=this["webpackJsonpvisarts-showcase"]||[]).push([[0],{138:function(e,t,a){},217:function(e,t,a){e.exports=a(463)},222:function(e,t,a){},463:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(34),l=a.n(s),r=(a(222),a(138),a(139),a(133)),o=a(49),u=a(48),c=a(22),m=a(23),d=a(25),h=a(24),v=a(7),b=a(26),p=a(94),g=a(180),f=a(182),E=a(184),S=a(183),y=a(181),O=a(179),C=a(61),j=a(185),k=a(209),w=a.n(k).a.initializeApp({apiKey:"AIzaSyAxi0R0RARe2uX8afqlzXrBC7_ilIjgd7Y",authDomain:"visarts-showcase.firebaseapp.com",databaseURL:"https://visarts-showcase.firebaseio.com",projectId:"visarts-showcase",storageBucket:"visarts-showcase.appspot.com",messagingSenderId:"939119617819",appId:"1:939119617819:web:1b50e3b920b6ee3e6a15be",measurementId:"G-2LCJJDS2VZ"}),F=(a(231),function(e){function t(e){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).call(this,e))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return i.a.createElement("h4",null,"Thank you for your submission, ",this.props.name,"!")}}]),t}(i.a.Component)),N={firstName:"",lastName:"",netId:"",grade:"",title:"",medium:"",year:"",description:"",image:null,url:"",dimensions:"",submitted:!1,loading:!1,attemptedToSubmit:!1},D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state=N,a.handleChange=a.handleChange.bind(Object(v.a)(a)),a.handleFiles=a.handleFiles.bind(Object(v.a)(a)),a.validateInput=a.validateInput.bind(Object(v.a)(a)),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"resetState",value:function(){this.setState(N)}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(u.a)({},n,a))}},{key:"handleFiles",value:function(e){var t=e.target.files[0];this.setState({image:t})}},{key:"validateInput",value:function(e){e.preventDefault();var t=this.state;""==t.firstName||""==t.lastName||""==t.netId||""==t.grade||null==t.image||""==t.title||""==t.description||""==t.medium||""==t.dimensions||""==t.year?(window.scrollTo(0,0),this.setState({attemptedToSubmit:!0})):(this.setState({attemptedToSubmit:!1}),this.handleSubmit(e))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0});var a=this.state.image,n=w.storage().ref("Spring".concat((new Date).getFullYear(),"/").concat(a.name));n.put(a).then((function(){n.getDownloadURL().then((function(e){t.setState({url:e}),t.pushToDatabase(),console.log("Uploaded file successfully: ",a.name,t.state),t.setState({submitted:!0})}))}))}},{key:"pushToDatabase",value:function(){var e=w.database().ref("submissions/".concat((new Date).getFullYear())),t={firstName:this.state.firstName,lastName:this.state.lastName,netId:this.state.netId,grade:this.state.grade,title:this.state.title,medium:this.state.medium,year:this.state.year,dimensions:this.state.dimensions,description:this.state.description,url:this.state.url};e.push(t)}},{key:"render",value:function(){return this.state.submitted?i.a.createElement("div",{align:"center"},i.a.createElement("h2",null,i.a.createElement("b",null,"VisArts Spring ",(new Date).getFullYear()," Showcase Submission")),i.a.createElement(F,{name:this.state.firstName})):i.a.createElement("div",null,i.a.createElement("h2",{align:"center"},i.a.createElement("b",null,"VisArts Spring ",(new Date).getFullYear()," Showcase Submission")),i.a.createElement("div",{className:"submissionForm"},this.state.attemptedToSubmit?i.a.createElement(p.a,{color:"danger"},"Submission failed. All fields are required."):"",i.a.createElement(g.a,{onSubmit:this.validateInput,className:"form"},i.a.createElement(f.a,null,i.a.createElement(E.a,null,"First Name"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.firstName,name:"firstName",type:"text",placeholder:"First Name",value:this.state.firstName,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Last Name"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.lastName,name:"lastName",type:"text",placeholder:"Last Name",value:this.state.lastName,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"NetID"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.netId,name:"netId",type:"text",placeholder:"NetID",value:this.state.netId,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Current grade level"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.grade,name:"grade",type:"select",value:this.state.grade,onChange:this.handleChange,placeholder:""},i.a.createElement("option",null),i.a.createElement("option",null,"First-year"),i.a.createElement("option",null,"Sophomore"),i.a.createElement("option",null,"Junior"),i.a.createElement("option",null,"Senior"),i.a.createElement("option",null,"Graduate/professional")),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Upload artwork"),i.a.createElement(O.a,{invalid:this.state.attemptedToSubmit,type:"file",name:"file",id:"file",onChange:this.handleFiles}),i.a.createElement(y.a,null,"File upload required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Title of work"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.title,name:"title",type:"text",placeholder:"Title",value:this.state.title,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Description"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.description,name:"description",type:"textarea",placeholder:"Description",value:this.state.description,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Medium"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.medium,name:"medium",type:"text",placeholder:"e.g. digital, screenprint, watercolor, etc.",value:this.state.medium,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Dimensions (width x height)"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.dimensions,name:"dimensions",type:"text",placeholder:"e.g. 10 in. x 16 in.",value:this.state.dimensions,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Year of creation"),i.a.createElement(S.a,{invalid:this.state.attemptedToSubmit&&""==this.state.year,name:"year",type:"year",placeholder:"Year",value:this.state.year,onChange:this.handleChange}),i.a.createElement(y.a,null,"This field is required")),i.a.createElement(C.a,{color:"primary",type:"submit"},"Submit"),this.state.loading?i.a.createElement(j.a,{color:"primary"}):"")))}}]),t}(i.a.Component),T=a(216),V=a(213),x=a(70),A=a.n(x),Y=(a(126),a(417),a(170)),I=a(214),U=a(95),P=a.n(U),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).currentUser=a.props.user,a.state={submissions:[]},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=w.database().ref("submissions/".concat(this.props.year)),t=w.database().ref("voters/".concat(this.props.year,"/").concat(this.currentUser.uid,"/votes")),a=[];e.on("value",(function(e){var n=e.val();t.on("value",(function(e){var t=e.val();for(var i in null==t&&(t={}),n){var s={id:i,title:n[i].title,description:n[i].description,url:n[i].url,userVote:t[i]};a.push(s)}}))})),this.setState({submissions:a})}},{key:"imgFormatter",value:function(e,t){return i.a.createElement("a",{href:t.url,target:"_blank"},i.a.createElement("img",{src:t.url,width:"auto",height:"50"}))}},{key:"render",value:function(){var e=[{dataField:"url",text:"Image",formatter:this.imgFormatter},{dataField:"title",text:"Title",sort:!0},{dataField:"description",text:"Description",sort:!0},{dataField:"userVote",text:"Your vote",sort:!0}];return i.a.createElement(P.a,{bootstrap4:!0,hover:!0,keyField:"id",data:this.state.submissions,columns:e,defaultSorted:[{dataField:"userVote",order:"desc"}],headerClasses:"header-class"})}}]),t}(i.a.Component),q={submissions:[],unvotedSubmissions:[],currentSubmission:{},currentVote:null,unVotedOn:!0,failedSubmission:!1},G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state=q,a.currentUser=a.props.user,a.handleSubmit=a.handleSubmit.bind(Object(v.a)(a)),a.handleChangeVote=a.handleChangeVote.bind(Object(v.a)(a)),a.handleNext=a.handleNext.bind(Object(v.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(v.a)(a)),a.handleUnvotedOnState=a.handleUnvotedOnState.bind(Object(v.a)(a)),a.validateSubmission=a.validateSubmission.bind(Object(v.a)(a)),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Component mounted");var t=w.database().ref("submissions/".concat((new Date).getFullYear())),a=w.database().ref("voters/".concat((new Date).getFullYear(),"/").concat(this.currentUser.uid,"/votes"));a.on("value",(function(e){return console.log("VOTE",e.val())})),t.on("value",(function(t){var n=t.val(),i=[],s=[],l=function(e){o=Object(V.a)({},n[e],{},{id:e}),i.push(o),a.on("value",(function(t){null!=t.val()&&e in t.val()||s.push(o)}))};for(var r in n){var o;l(r)}e.setState({submissions:i,unvotedSubmissions:s,currentSubmission:s[0]})}))}},{key:"handleUnvotedOnState",value:function(e){"All submissions"==e.target.textContent?this.setState({unVotedOn:!1}):this.setState({unVotedOn:!0})}},{key:"validateSubmission",value:function(e){e.preventDefault(),null==this.state.currentVote?this.setState({failedSubmission:!0}):this.handleSubmit(e)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=w.database().ref("voters/".concat((new Date).getFullYear(),"/").concat(this.currentUser.uid,"/votes")),n=Object(u.a)({},this.state.currentSubmission.id,this.state.currentVote),i=Object(T.a)(this.state.unvotedSubmissions),s=i.indexOf(this.state.currentSubmission);s>-1&&(i.splice(s,1),this.setState({unvotedSubmissions:i},(function(){0==t.state.unvotedSubmissions.length?t.setState({currentSubmission:null}):t.handleNext()||t.handlePrevious()}))),a.update(n).then((function(){return console.log("Pushed vote successful",t.state.currentVote)}))}},{key:"handleNext",value:function(e){var t=this.state.unvotedSubmissions.indexOf(this.state.currentSubmission);return t+1>=0&&t+1<this.state.unvotedSubmissions.length&&(this.setState({currentSubmission:this.state.unvotedSubmissions[t+1],currentVote:null,failedSubmission:!1}),!0)}},{key:"handlePrevious",value:function(e){var t=this.state.unvotedSubmissions.indexOf(this.state.currentSubmission);return t-1>=0&&t-1<this.state.unvotedSubmissions.length&&(this.setState({currentSubmission:this.state.unvotedSubmissions[t-1],currentVote:null,failedSubmission:!1}),!0)}},{key:"handleChangeVote",value:function(e){this.setState({currentVote:e})}},{key:"render",value:function(){return null==this.state.currentSubmission&&this.state.unVotedOn?i.a.createElement("div",null,i.a.createElement(Y.a,null,i.a.createElement(C.a,{outline:!0,color:"primary",onClick:this.handleUnvotedOnState,active:0==this.state.unVotedOn},"All submissions"),i.a.createElement(C.a,{outline:!0,color:"primary",onClick:this.handleUnvotedOnState,active:1==this.state.unVotedOn},"Unvoted")),i.a.createElement("h4",null,"Hello, ",this.currentUser.displayName,"! There are no more submissions to rate at this time.")):0==this.state.unVotedOn?i.a.createElement("div",null,i.a.createElement(Y.a,null,i.a.createElement(C.a,{outline:!0,color:"primary",onClick:this.handleUnvotedOnState,active:0==this.state.unVotedOn},"All submissions"),i.a.createElement(C.a,{outline:!0,color:"primary",onClick:this.handleUnvotedOnState,active:1==this.state.unVotedOn},"Unvoted")),i.a.createElement(R,{user:this.currentUser,year:(new Date).getFullYear()})):i.a.createElement("div",null,i.a.createElement(Y.a,null,i.a.createElement(C.a,{outline:!0,color:"primary",onClick:this.handleUnvotedOnState,active:0==this.state.unVotedOn},"All submissions"),i.a.createElement(C.a,{outline:!0,color:"primary",onClick:this.handleUnvotedOnState,active:1==this.state.unVotedOn},"Unvoted")),i.a.createElement("div",null,i.a.createElement("h3",null,"Hello, ",this.currentUser.displayName,"! Please submit a vote for the following ",this.state.unvotedSubmissions.length," submission(s)."),i.a.createElement("div",{className:"inline"},i.a.createElement(C.a,{outline:!0,color:"secondary",onClick:this.handlePrevious},"Previous"),i.a.createElement(C.a,{outline:!0,color:"secondary",onClick:this.handleNext},"Next")),i.a.createElement("a",{href:this.state.currentSubmission.url,target:"_blank"},i.a.createElement("img",{src:this.state.currentSubmission.url,height:"200"})),i.a.createElement("div",{className:"containerVoting"},i.a.createElement("p",null,i.a.createElement("i",null,"(Click to enlarge)")),i.a.createElement("div",{align:"left"},i.a.createElement("p",null,i.a.createElement("b",null,"Title:")," ",this.state.currentSubmission.title),i.a.createElement("p",null,i.a.createElement("b",null,"Description:")," ",this.state.currentSubmission.description),i.a.createElement("p",null,i.a.createElement("b",null,"Medium:")," ",this.state.currentSubmission.medium),i.a.createElement("p",null,i.a.createElement("b",null,"Dimensions:")," ",this.state.currentSubmission.dimensions),i.a.createElement("p",null,i.a.createElement("b",null,"Your vote:")," ",i.a.createElement(I.a,{placeholderRating:this.state.currentVote,onChange:this.handleChangeVote})),this.state.failedSubmission?i.a.createElement(p.a,{color:"danger"},"Error! Please select a rating before submitting."):""),i.a.createElement(g.a,{onSubmit:this.validateSubmission},i.a.createElement(C.a,{color:"primary",type:"submit"},"Submit Vote")))))}}]),t}(i.a.Component),L=a(96),M=w.auth(),J={googleProvider:new A.a.auth.GoogleAuthProvider},B=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.signOut,n=e.signInWithGoogle;return i.a.createElement("div",null,i.a.createElement("h2",{align:"center"},i.a.createElement("b",null,"VisArts Spring ",(new Date).getFullYear()," Showcase Voting")),t?i.a.createElement("div",null,i.a.createElement(C.a,{style:{position:"absolute",top:0,right:0},outline:!0,color:"danger",onClick:a},"Sign out")):"",i.a.createElement("div",{align:"center"},t?i.a.createElement("div",null,i.a.createElement(G,{user:t})):i.a.createElement("div",{className:"centerPage"},i.a.createElement("h5",null,"For VisArts Committee Members only - please sign in to vote."),i.a.createElement(C.a,{outline:!0,color:"primary",onClick:n},"Sign in with Google"))))}}]),t}(i.a.Component),W=Object(L.a)({providers:J,firebaseAppAuth:M})(B),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={data:{},submissions:[],loading:!0,currentYearSelected:(new Date).getFullYear(),submissionsRef:w.database().ref("submissions/".concat((new Date).getFullYear())),votersRef:w.database().ref("voters/".concat((new Date).getFullYear()))},a.handleYearDisplay=a.handleYearDisplay.bind(Object(v.a)(a)),a.retrieveDatabase(),a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"retrieveDatabase",value:function(){var e=this;console.log("Retrieve database called with state",this.state),this.state.submissionsRef.on("value",(function(t){var a=t.val(),n={},i=function(t){n[t]={votes:[],title:a[t].title,description:a[t].description,url:a[t].url,firstName:a[t].firstName,lastName:a[t].lastName,id:t},e.state.votersRef.on("value",(function(a){var i=a.val();for(var s in i){w.database().ref("voters/".concat(e.state.currentYearSelected,"/").concat(s,"/votes")).on("value",(function(e){var a=e.val();if(t in a){var i=a[t];n[t].votes.push(i)}}))}})),e.setState({data:n})};for(var s in a)i(s);var l=[];Object.keys(e.state.data).forEach((function(t){l.push(e.state.data[t])})),e.setState({submissions:l},(function(){e.setState({loading:!1}),console.log("finished",e.state.submissions)}))}))}},{key:"imgFormatter",value:function(e,t){return i.a.createElement("a",{href:t.url,target:"_blank"},i.a.createElement("img",{src:t.url,width:"auto",height:"50"}))}},{key:"totalFormatter",value:function(e,t){return i.a.createElement("div",null,t.votes.length)}},{key:"handleYearDisplay",value:function(e){var t=this;e.preventDefault();var a=e.target.value;this.setState({currentYearSelected:a,submissionsRef:w.database().ref("submissions/".concat(a)),votersRef:w.database().ref("voters/".concat(a))},(function(){return t.retrieveDatabase()}))}},{key:"render",value:function(){var e=this;console.log("RENDER STATE: ",this.state);var t=[{dataField:"url",text:"Image",formatter:this.imgFormatter},{dataField:"title",text:"Title",sort:!0},{dataField:"description",text:"Description",sort:!0},{dataField:"firstName",text:"First Name",sort:!0},{dataField:"lastName",text:"Last Name",sort:!0},{dataField:"votes",text:"Total votes",sort:!0,formatter:this.totalFormatter},{dataField:"",text:"Averate rating",sort:!0},{dataField:"",text:"Median rating",sort:!0}];return this.state.loading?i.a.createElement(j.a,{color:"primary"}):i.a.createElement("div",null,i.a.createElement(C.a,{color:"primary"},"Download spreadsheet"),i.a.createElement(f.a,null,i.a.createElement(E.a,null,"Displaying year"),i.a.createElement(S.a,{type:"select",value:this.state.currentYearSelected,onChange:this.handleYearDisplay},i.a.createElement("option",null,"2020"),i.a.createElement("option",null,"2021"),i.a.createElement("option",null,"2022"))),i.a.createElement(P.a,{bootstrap4:!0,hover:!0,keyField:"id",data:this.state.submissions,columns:t,defaultSorted:[{dataField:"userVote",order:"desc"}],headerClasses:"header-class"}),i.a.createElement("button",{onClick:function(){return console.log(e.state)}},"STATE"))}}]),t}(i.a.Component),z=w.auth(),H={googleProvider:new A.a.auth.GoogleAuthProvider},X=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.signOut,n=e.signInWithGoogle;return i.a.createElement("div",null,i.a.createElement("h2",{align:"center"},i.a.createElement("b",null,"VisArts Spring Showcase Admin")),t?i.a.createElement("div",null,i.a.createElement(C.a,{style:{position:"absolute",top:0,right:0},outline:!0,color:"danger",onClick:a},"Sign out")):"",i.a.createElement("div",{align:"center"},t?i.a.createElement("div",null,i.a.createElement(_,{user:t})):i.a.createElement("div",{className:"centerPage"},i.a.createElement("h5",null,"For VisArts Committee Chair only - please sign in."),i.a.createElement(C.a,{outline:!0,color:"primary",onClick:n},"Sign in with Google"))))}}]),t}(i.a.Component),K=Object(L.a)({providers:H,firebaseAppAuth:z})(X);var Z=function(){return i.a.createElement(r.a,{basename:"/",className:"App-style"},i.a.createElement(o.a,{exact:!0,path:"/",component:D}),i.a.createElement(o.a,{path:"/voting",component:W}),i.a.createElement(o.a,{path:"/admin",component:K}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[217,1,2]]]);
//# sourceMappingURL=main.b2055847.chunk.js.map