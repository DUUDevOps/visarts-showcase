(this["webpackJsonpvisarts-showcase"]=this["webpackJsonpvisarts-showcase"]||[]).push([[0],{45:function(e,t,a){e.exports=a(66)},50:function(e,t,a){},51:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(35),l=a.n(i),r=(a(50),a(51),a(52),a(26)),u=a(14),o=a(15),c=a(16),h=a(17),m=a(19),d=a(18),b=a(7),v=a(20),p=a(67),g=a(68),f=a(69),E=a(70),S=a(71),y=a(72),C=a(36),O=a.n(C).a.initializeApp({apiKey:"AIzaSyAxi0R0RARe2uX8afqlzXrBC7_ilIjgd7Y",authDomain:"visarts-showcase.firebaseapp.com",databaseURL:"https://visarts-showcase.firebaseio.com",projectId:"visarts-showcase",storageBucket:"visarts-showcase.appspot.com",messagingSenderId:"939119617819",appId:"1:939119617819:web:1b50e3b920b6ee3e6a15be",measurementId:"G-2LCJJDS2VZ"}),j={firstName:"",lastName:"",netId:"",grade:"",title:"",medium:"",year:"",description:"",image:null,url:""},k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state=j,a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleFiles=a.handleFiles.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"resetState",value:function(){this.setState(j)}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(o.a)({},n,a))}},{key:"handleFiles",value:function(e){if(e.target.files[0]){var t=e.target.files[0];this.setState({image:t})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.image,n=O.storage().ref("Spring2020/".concat(a.name));n.put(a).then((function(){n.getDownloadURL().then((function(e){t.setState({url:e}),t.pushToDatabase(),console.log("Uploaded file successfully: ",a.name,t.state)}))})),alert("A name was submitted: "+this.state.firstName+" "+this.state.lastName)}},{key:"pushToDatabase",value:function(){var e=O.database().ref("submissions"),t={firstName:this.state.firstName,lastName:this.state.lastName,netId:this.state.netId,grade:this.state.grade,title:this.state.title,medium:this.state.medium,year:this.state.year,description:this.state.description,url:this.state.url};e.push(t)}},{key:"render",value:function(){return s.a.createElement(p.a,{fluid:"sm"},s.a.createElement(g.a,{onSubmit:this.handleSubmit},s.a.createElement(f.a,null,s.a.createElement(E.a,null,"First Name"),s.a.createElement(S.a,{name:"firstName",type:"text",value:this.state.firstName,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Last Name"),s.a.createElement(S.a,{name:"lastName",type:"text",value:this.state.lastName,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"NetID"),s.a.createElement(S.a,{name:"netId",type:"text",value:this.state.netId,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Current grade"),s.a.createElement(S.a,{name:"grade",type:"select",value:this.state.grade,onChange:this.handleChange,placeholder:""},s.a.createElement("option",null,"First-year"),s.a.createElement("option",null,"Sophomore"),s.a.createElement("option",null,"Junior"),s.a.createElement("option",null,"Senior"),s.a.createElement("option",null,"Graduate/professional"))),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Title of work"),s.a.createElement(S.a,{name:"title",type:"text",value:this.state.title,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Medium"),s.a.createElement(S.a,{name:"medium",type:"text",value:this.state.medium,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Year of creation"),s.a.createElement(S.a,{name:"year",type:"text",value:this.state.year,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Description"),s.a.createElement(S.a,{name:"description",type:"textarea",value:this.state.description,onChange:this.handleChange})),s.a.createElement(f.a,null,s.a.createElement(E.a,null,"Upload file"),s.a.createElement(S.a,{type:"file",name:"file",onChange:this.handleFiles})),s.a.createElement(y.a,{variant:"primary",type:"submit"},"Submit")))}}]),t}(s.a.Component),N=a(43),w=a(38),x=a(25),I=a.n(x),V=(a(33),a(63),a(39)),D={submissions:[],unvotedSubmissions:[],currentSubmission:{},currentVote:null},P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state=D,a.currentUser=a.props.user,a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleChangeVote=a.handleChangeVote.bind(Object(b.a)(a)),a.handleNext=a.handleNext.bind(Object(b.a)(a)),a.handlePrevious=a.handlePrevious.bind(Object(b.a)(a)),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("Component mounted");var t=O.database().ref("submissions"),a=O.database().ref("voters/".concat(this.currentUser.uid,"/votes"));a.on("value",(function(e){return console.log("VOTE",e.val())})),t.on("value",(function(t){var n=t.val(),s=[],i=[],l=function(e){u=Object(w.a)({},n[e],{},{id:e}),s.push(u),a.on("value",(function(t){null!=t.val()&&e in t.val()||i.push(u)}))};for(var r in n){var u;l(r)}e.setState({submissions:s,unvotedSubmissions:i,currentSubmission:i[0]})}))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=O.database().ref("voters/".concat(this.currentUser.uid,"/votes")),n=Object(o.a)({},this.state.currentSubmission.id,this.state.currentVote),s=Object(N.a)(this.state.unvotedSubmissions),i=s.indexOf(this.state.currentSubmission);i>-1&&(s.splice(i,1),this.setState({unvotedSubmissions:s},(function(){0==t.state.unvotedSubmissions.length?t.setState({currentSubmission:null}):t.handleNext()||t.handlePrevious()}))),a.update(n).then((function(){return console.log("Pushed vote successful",t.state.currentVote)}))}},{key:"handleNext",value:function(e){var t=this.state.unvotedSubmissions.indexOf(this.state.currentSubmission);return t+1>=0&&t+1<this.state.unvotedSubmissions.length&&(this.setState({currentSubmission:this.state.unvotedSubmissions[t+1]}),!0)}},{key:"handlePrevious",value:function(e){var t=this.state.unvotedSubmissions.indexOf(this.state.currentSubmission);return t-1>=0&&t-1<this.state.unvotedSubmissions.length&&(this.setState({currentSubmission:this.state.unvotedSubmissions[t-1]}),!0)}},{key:"handleChangeVote",value:function(e){this.setState({currentVote:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h3",null,"Hello, ",this.currentUser.displayName,"! Please submit a vote on the following ",this.state.unvotedSubmissions.length," submissions."),this.state.currentSubmission?s.a.createElement(p.a,null,s.a.createElement("img",{src:this.state.currentSubmission.url}),s.a.createElement("p",null,"Title: ",this.state.currentSubmission.title),s.a.createElement("p",null,"Description: ",this.state.currentSubmission.description),s.a.createElement("p",null,"Medium: ",this.state.currentSubmission.medium),s.a.createElement("p",null,"Dimensions: ",this.state.currentSubmission.dimensions),s.a.createElement("p",null,"Vote: ",s.a.createElement(V.a,{value:this.state.currentVote,onChange:this.handleChangeVote})),s.a.createElement(g.a,{onSubmit:this.handleSubmit},s.a.createElement(y.a,{type:"submit"},"Submit Vote")),s.a.createElement(y.a,{onClick:this.handlePrevious},"Previous"),s.a.createElement(y.a,{onClick:this.handleNext},"Next"),s.a.createElement("button",{onClick:function(){console.log(e.state)}},"Get the fuckin state")):s.a.createElement("h3",null,"No more submissions to rate!"))}}]),t}(s.a.Component),A=a(40),G=O.auth(),U={googleProvider:new I.a.auth.GoogleAuthProvider},F=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.signOut,n=e.signInWithGoogle;return s.a.createElement("div",null,s.a.createElement("h1",null,"VOTING PAGE"),t?s.a.createElement(P,{user:t}):s.a.createElement("p",null,"Please sign in."),t?s.a.createElement("button",{onClick:a},"Sign out"):s.a.createElement("button",{onClick:n},"Sign in with Google"))}}]),t}(s.a.Component),T=Object(A.a)({providers:U,firebaseAppAuth:G})(F);var J=function(){return s.a.createElement("div",null,s.a.createElement("header",null,"VisArts Spring 2020 Showcase Submission"),s.a.createElement(r.a,null,s.a.createElement("div",null,s.a.createElement(u.a,{exact:!0,path:"/",component:k}),s.a.createElement(u.a,{path:"/voting",component:T}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.60591026.chunk.js.map